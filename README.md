# Vandore Heritage Static Site

This repository contains the marketing website for Vandore Heritage. The site is organised for CloudCannon so you can edit every page visually and manage structured content (properties, rentals, blog posts) through collection editors.

## Local Preview

1. Install dependencies (installs the helper scripts only):
   ```bash
   npm install
   ```
2. Build the deployable site into `_site/`:
   ```bash
   npm run build
   ```
3. Serve the `_site/` folder with any static server (examples):
   ```bash
   npx http-server _site -p 8080
   # or
   npx serve _site
   ```
   Then open `http://localhost:8080/index.html` (all other pages sit in the same folder).

When you change the HTML templates in `pages/`, regenerate the structured content JSON for inline editing by running:
```bash
npm run generate:content
```
This keeps the files under `content/pages/` in sync with the `data-sb-field-path` bindings.

## CloudCannon Setup

1. Connect the repository or branch to CloudCannon.
2. The `.cloudcannon/config.yml` already sets the correct build commands:
   - Install command: `npm install`
   - Build command: `npm run build`
   - Output path: `_site`
3. The Visual Editor serves the HTML output from `_site/`, so visiting `/` shows `index.html` and the other pages resolve at their root URLs (for example `/properties.html`).
4. Image uploads through the editor go to `image/uploads/` and are preserved by the config.

### Editing Pages
- Open any page in the Visual Editor and adjust copy or swap images. Saving writes to the matching JSON under `content/pages/`.
- For broader edits, use the `Page Content` collection (CloudCannon exposes the folder defined in the config).

### Managing Listings and Blog Posts
CloudCannon collection schemas map to the JSON data files:
- **Properties** (`data/properties.json`, key `properties`)
- **Rentals** (`data/rentals.json`, key `rentals`)
- **Blogs** (`data/blogs.json`, key `blogs`)

Add or edit items through the editor to update the JSON consumed by the front-end filters.

### Adding New Assets
- Upload images through CloudCannon to `image/uploads/` to keep paths consistent.
- Reference uploads as `/image/uploads/filename.ext` in JSON or page content so they resolve locally, in the editor, and on the published site.

## Helpful Scripts
- `npm run generate:content` – rebuilds the JSON backing CloudCannon inline editing.
- `npm run build` – copies assets and normalises HTML paths into `_site/` for CloudCannon hosting or any static deployment.

## Repository Structure
- `pages/` – source HTML files tied to CloudCannon visual editing.
- `content/` – JSON data used by the `data-sb-field-path` attributes.
- `data/` – JSON collections consumed by the front-end scripts.
- `js/` – Front-end JavaScript (filters, data loading, etc.).
- `.cloudcannon/config.yml` – CloudCannon project configuration and collection schemas.
- `_site/` – build output (generated by `npm run build`).
